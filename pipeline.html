<!DOCTYPE html>
<html lang="en">
<head>
    <title>Funnel Chart Sample</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style>
        body {
            text-align: center;
            padding: 0px;
            margin: 0px;
        }
        .gauge {
            display: block;
            float: left;
            height: 230px;
            width: 350px;
        }
        #funnel {
            width: 100%;
        }
    </style>
</head>
<body>
        <div id="funnel" class="gauge"></div>
        </div>                
        <script src="d3.min.js"></script>
        <script src="d3-funnel.min.js" type="text/javascript"></script>
        <script>
            document.addEventListener("DOMContentLoaded", showfunnel);
            function showfunnel() {
                var url = window.location.href;
                var regex = /[?&]([^=#]+)=([^&#]*)/g,
                    params = {},
                    match;
                while (match = regex.exec(url)) {
                    params[match[1]] = match[2];
                }
                var data = [
                    ['Plan',params['Plan'],"#b7295a"],
                    ['Discover',params['Discover'],"#00447c"],
                    ['Qualify',params['Qualify'],"#007db8"],
                    ['Propose',params['Propose'],"#42aeaf"],
                    ['Commit',params['Commit'],"#c1d82f"],
                    ['Win',params['Win'],"#6ea204"]       
                ];
                var options = {
                    chart: {
                        width: 350,
                        height: 230,
                        bottomWidth: 1 / 3,
                        bottomPinch: 0,
                        animate: 100
                    },
                        label: {
                        enabled: true,
                        fontFamily: null,
                        fontSize: '14px',
                        fill: '#fff',
                        format: '{l}: {f}%',
                    },
                    events: {
                        click: {
                            block: null,
                        },
                    },
                };
                var chart = new D3Funnel('#funnel');
                chart.draw(data, options);
            }
        </script>
</body>
</html>
