<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <style>
        body {
            text-align: center;
            padding: 0px;
            margin: 0px;
            font-family: 'Roboto', sans-serif; 
        }
        /* clearfix */

        .clear:before,
        .clear:after {
            content: "";
            display: table;
        }

        .clear:after {
            clear: both;
        }

        .clear {
            *zoom: 1.5;
        }

        .gauge {
            display: block;
            float: left;
            height: 300px;
        }

        #g2 {
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="g2" class="gauge">
    <p>The Early Warning System is indicating {0} distress with your customer.</p>
    <p>Detected areas are:</p> <div id='indicators'></div>
    <p>If you need further assistance with this account, please enter a Help A Customer Request.</p>
    </div>    
    <script src="raphael-2.1.4.min.js"></script>
    <script src="justgage.js"></script>
    <script>
        function showGraph() {
            var g1, g2, g3;
            var url = window.location.href;
            var regex = /[?&]([^=#]+)=([^&#]*)/g,
                params = {},
                match;
            while (match = regex.exec(url)) {
                params[match[1]] = match[2];
            }            
            
            var indicators = params['indicators'];
            var score = params['score'];
            var indicatorsArray = indicators.split('|');
            var distressIndicator = '<ul>';
            for(i=0;i<indicatorsArray.length;i++)
            {
                switch(indicatorsArray[i])
                {
                    case 'OTD':
                            distressIndicator += '<li>On Time Delivery</li>';
                            break;
                    case 'Canc':
                            distressIndicator += '<li>Canceled Orders</li>';
                            break;
                    case 'REDD':
                            distressIndicator += '<li>Redefined Delivery Date</li>';
                            break;
                    case 'XLT':
                            distressIndicator += '<li>Extended Lead Time</li>';
                            break;
                    case 'HaC':
                            distressIndicator += '<li>Help A Customer Requests</li>';
                            break;
                    case 'DSAT':
                            distressIndicator += '<li>DSAT score on CSAT surveys</li>';
                            break;
                    case 'SEV1':
                            distressIndicator += '<li>Severity 1 Service Requests</li>';
                            break;
                    case 'E1RM':
                            distressIndicator += '<li>Severity E1 Service Requests</li>';
                            break;
                    case 'COD':
                            distressIndicator += '<li>Cost of Dissatisfaction </li>';
                            break;
                    case 'CHURN':
                            distressIndicator += '<li>Account Rep Churn</li>';
                            break;
                }
            }   
                        
          distressIndicator += '</ul>';                        
          document.getElementById("indicators") = distressIndicator;                                    
                }
                        document.addEventListener("DOMContentLoaded", showGraph);
    </script>
    
</body>

</html>
